D=document;M=Math;W=window;R=M.random;function F(){for(i=5E4;i--;){g=m[3][~~(R()*m[3].length)];t=g[1]*x+g[2]*y+g[5];y=g[3]*x+g[4]*y+g[6];j=t*t+y*y;switch(g[0]){case 1:x=M.sin(t),y=M.sin(y);case 2:x=t/j,y/=j}u=~~(x*w+w);v=~~(y*h+h);l=u*w+v;H[l]=H[l]?H[l]+1:1;H[l]>d&&(d=H[l])}z=a.createImageData(w,h);Z=z.data;for(i=w*h;i--;)t=M.log(H[i])/M.log(d),j=4*i,Z[j]=n(t,0),Z[j+1]=n(t,1),Z[j+2]=n(t,2),Z[j+3]=255;a.putImageData(z,0,0);W.setTimeout(F,9)}
function I(){w=c.width=W.innerWidth;h=c.height=W.innerHeight;H=Array(w*h);m=JSON.parse(J.value);F()}x=y=d=w=h=H=m=0;E=D.createElement("i");E.innerHTML="<textarea id=f></textarea><button onclick=I();>\u25b6</button><button onclick=W.open(c.toDataURL('image/png'));>\u2605</button>";G=E.style;G.top=G.left=0;G.position="absolute";b.appendChild(E);O=[M.tan,M.sin,M.cos];function n(e,f){return 255*O[m[1][f]](e)*e*m[0][f]}
m=[[1,1,1],[0,1,2],[0,0,1],[[2,0.56,-0.53,0.397,0.5,-0.42,-0.11],[2,0.83,0.162,-0.49,0.75,0.91,0.288]]];J=D.getElementById("f");J.value=JSON.stringify(m);
